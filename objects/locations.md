# Locations

## The Location object

| Attribute    | Type |       |
| ------------- |:----:| -----|  
| `id`          |  uuid |  Location id, generated by foxtag | 
| `number`       |  string |  *optional*<br>Number of location | 
| `name`   |   string |  *optional*<br>Name of location | 
| `active_name`   |   string |  *readonly*<br>Locations name if present or customers name as a fallback | 
| `customer_id`   |   uuid |  Id of related customer |
| `shares_customer_address`   |   boolean |  `true` if address of customer is also address of location | 
| `active_address`    |  json |  *readonly*<br>Locations address or customers address depending on shares_customer_address (see [Addresses](/objects/addresses.md)) | 
| `updated_at`  | timestamp |  Last update of object |


## List all locations

This endpoint retrieves all locations. The response is paginated if more than 500 records exist (see [Pagination](/pagination_sorting.md) for details).

#### HTTP Request

`GET /locations`

```bash
# example request
curl "https://api.foxtag.io/api/v1/public/locations"
  -H "Authorization: Bearer token=süpersecret"
```
```json
// example response
{
  "locations": [
    {
      "id": "556dfe02-c287-4634-98e9-b9cc13d69e28",
      "number": "L-1",
      "name": "Test",
      "active_name": "Test",
      "customer_id": null,
      "shares_customer_address": false,
      "updated_at": "2018-02-28T14:07:23.923Z",
      "active_address": {
        "line1": "Danziger Str. 36",
        "line2": null,
        "zip": "20099",
        "city": "Hamburg",
        "country": "DE"
      }
    }
  ],
  "meta": {
    "current_page": 1,
    "total_pages": 1,
    "total_count": 1
  }
}
```

## Retrieve a specific location

This endpoint retrieves a specific location.

#### HTTP Request with Id

`GET /locations/:id`

| Parameter    | Description |
| ------------ | ----- |  
| `id`         |  The UUID of the location to retrieve |

#### HTTP Request with location number filter

`GET /locations/?number=:number`

| Query Parameter    | Description |
| ------------ | ----- |  
| `number`     |  The number of the location to retrieve |

## Create or update locations

You can create or update multiple locations with a single request by posting a list of location objects.

#### HTTP Request

`POST /locations`

| Attribute    | Type |       |
| ------------- |:----:| -----|   
|`id` | uuid |*optional*<br>Creates a new record if id is not given<br>Creates new record if given and id is not existing<br>Updates a record if given and id is already existing|
| `number`       |  string |  *optional*<br>Number of location | 
| `name`   |   string |  *optional*<br>Name of location | 
| `customer_id`       |  string |  *optional*<br>Related customer | 
| `shares_customer_address`   |   boolean |  `true` if address of customer is also address of location | 
| `address_attributes` | json |*optional*<br>Location's address (see [Addresses](/objects/addresses.md)) | 

```bash
# Example request to insert/update locations
curl "https://api.foxtag.io/api/v1/public/locations"
  -H "Content-Type: application/json"
  -H "Authorization: Bearer token=süpersecret"
  -X POST
  -d '(see JSON payload below)'  
```
```json
// example JSON payload to insert/update locations
{
  "locations": [        
    {
      "number": "L1",
      "customer_id": "00cf60e1-990d-40b2-9301-fd2538e978fb",
      "shares_customer_address": true
    },
    {
      "name": "Test Location",
      "number": "L2",
      "customer_id": null,
      "shares_customer_address": false,
      "address_attributes": {
        "line1": "Danziger Str. 36",
        "line2": "",
        "zip": "20099",
        "city": "Hamburg",
        "country": "DE"
      }
    }
  ]
}
```
#### HTTP Response

API responds with a list of ids and/or error messages. Refer to [Create/Update Response](/create_update_response?id=createupdate-response) for details.

## Delete a single location

#### HTTP Request

`DELETE /locations/:id`

| Parameter    | Description |
| ------------ | ----- |  
| `id`         |  The UUID of the location to delete |   


!> You cannot delete location records referenced by installations, you have to delete the installations first. 

```bash
# Example request to delete a location
curl "https://api.foxtag.io/api/v1/public/locations/49199fe8-a5ea-4065-8acb-8c9bd2199586"
  -H "Authorization: Bearer token=süpersecret"
  -X DELETE
```


