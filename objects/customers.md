# Customers

## The Customer object

| Attribute    | Type |       |
| ------------- |:----:| -----|  
| `id`          |  uuid |  Customer id, generated by foxtag | 
| `customer_no`       |  string |  Customer number, must be unique | 
| `name`   |   string |  Name of customer | 
| `address`    |  json |  Customer's address (see [Addresses](/objects/addresses.md)) | 
| `updated_at`  | timestamp |  Last update of object |

## List all customers

This endpoint retrieves all customers. The response is paginated if more than 500 records exist (see [Pagination](/pagination_sorting.md) for details).

#### HTTP Request

`GET /customers`

```bash
# example request
curl "https://api.foxtag.io/api/v1/public/customers"
  -H "Authorization: Bearer token=süpersecret"
```
```json
// example response
{
  "customers": [
    {
      "id": "d412502b-3888-4bbb-8726-09ba5998fb89",
      "customer_no": "C-1000",
      "name": "My Customer Corp.",
      "updated_at": "2018-03-23T09:25:08.547Z",
      "address": {
        "line1": "Meine Str. 55",
        "line2": "",
        "zip": "22767",
        "city": "Hamburg",
        "country": "DE"
      }
    }
  ],
  "meta": {
    "current_page": 1,
    "total_pages": 1,
    "total_count": 1
  }
}
```

## Retrieve a specific customer

This endpoint retrieves a specific customer.

#### HTTP Request

`GET /customers/:id`

| Parameter    | Description |
| ------------ | ----- |  
| `id`         |  The UUID of the customer to retrieve |

#### HTTP Request with customer number filter

`GET /customers/?customer_no=:customer_no`

| Query Parameter    | Description |
| ------------ | ----- |  
| `customer_no`     |  The unique customer_no of the customer to retrieve |

## Create or update customers

You can create or update multiple customers with a single request by posting a list of customer objects.

#### HTTP Request

`POST /customers`

| Attribute    | Type |       |
| ------------- |:----:| -----|   
|`id` | uuid |*optional*<br>Creates a new record if id is not given<br>Creates new record if given and id is not existing<br>Updates a record if given and id is already existing|
| `customer_no`       |  string |  Customer number, must be unique | 
| `name`   |   string |  Name of customer | 
| `address`    |  json |  Customer's address (see [Addresses](/objects/addresses.md)) | 
   
```bash
# Example request to insert/update customers
curl "https://api.foxtag.io/api/v1/public/customers"
  -H "Content-Type: application/json"
  -H "Authorization: Bearer token=süpersecret"
  -X POST
  -d '(see JSON payload below)'  
```
```json
// example JSON payload to insert/update customers
{
    "customers": [
        {
            "customer_no": "C-1",
            "name": "First Customer Corp.",
            "address_attributes": {
                "line1": "Meine Str. 5",
                "zip": "20222",
                "city": "Hamburg",
                "country": "DE"
            }
        },
                {
            "customer_no": "C-2",
            "name": "Second Customer Corp.",
            "address_attributes": {
                "line1": "Meine Str. 5",
                "zip": "20222",
                "city": "Hamburg",
                "country": "DE"
            }
        }
    ]
}
```
#### HTTP Response

API responds with a list of ids and/or error messages. Refer to [Create/Update Response](/create_update_response?id=createupdate-response) for details.

## Delete a single customer

#### HTTP Request

`DELETE /customers/:id`

| Parameter    | Description |
| ------------ | ----- |  
| `id`         |  The UUID of the customer to delete |   


!> You cannot delete customer records referenced by locations, you have to delete the locations first. 

```bash
# Example request to delete a customer
curl "https://api.foxtag.io/api/v1/public/customers/49199fe8-a5ea-4065-8acb-8c9bd2199586"
  -H "Authorization: Bearer token=süpersecret"
  -X DELETE
```


